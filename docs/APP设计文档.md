# 腹透日记 APP 设计文档

## 1. 应用概述

"腹透日记"是一款专为腹膜透析患者设计的健康管理应用，旨在帮助患者记录、管理和分析腹透治疗数据，提高治疗效果和生活质量。应用提供了全面的腹透数据记录、分析和管理功能，同时整合了体重、血压等健康指标的监测，为患者提供全方位的健康管理解决方案。

## 2. 用户群体

- 腹膜透析患者
- 肾脏病患者
- 医护人员
- 患者家属

## 3. 核心功能模块

### 3.1 腹透记录管理

#### 3.1.1 腹透计划管理

**功能描述**：
- 创建和管理个性化腹透计划
- 设置透析液浓度、透析次数和时间
- 根据医嘱调整透析方案

**关键页面**：
- `/pdPlan/planManage` - 腹透计划管理页面
- `/pdPlan/input` - 腹透计划输入页面

#### 3.1.2 腹透数据记录

**功能描述**：
- 记录每次腹透的详细数据
- 包括透析液浓度、引入量、引流量、超滤量等
- 支持首次使用特殊处理
- 支持选择记录时间

**关键页面**：
- `/pdPlan/record` - 腹透数据记录页面
- `/pdPlan/recordDetail` - 腹透记录详情页面
- `/pdPlan/editRecord` - 编辑腹透记录页面

**交互设计**：
- 数字键盘输入
- 单位切换（ml/kg）
- 日期时间选择器

#### 3.1.3 腹透历史记录

**功能描述**：
- 查看历史腹透记录
- 按日期筛选和查看
- 支持编辑和删除历史记录

**关键页面**：
- `/pdPlan/history` - 腹透历史记录页面
- `/pdPlan/HistoricalDataMore` - 更多历史数据页面

### 3.2 腹透数据分析

#### 3.2.1 统计中心 - 腹透分析

**功能描述**：
- 提供腹透数据的统计分析
- 支持日/周/月视图模式切换
- 展示超滤量、引流量、注入量等关键指标的趋势图
- 提供数据异常值分析

**关键页面**：
- `/statistics` (腹透标签页) - 统计中心腹透分析页面

**组件结构**：
- `PdAnalysis` - 腹透分析主组件
- `PdChart` - 腹透数据图表组件
- `PdStatistics` - 腹透统计数据组件
- `AbnormalValues` - 异常值分析组件
- `ViewModeSelector` - 视图模式选择器
- `DateNavigator` - 日期导航组件

**数据可视化**：
- 超滤量趋势图
- 引流量趋势图
- 注入量趋势图
- 数据异常值标记

#### 3.2.2 腹透记录页面 - 统计分析

**功能描述**：
- 在腹透记录页面内提供基础统计分析
- 展示体重趋势和超滤量趋势
- 提供周期性统计数据摘要

**关键页面**：
- `/PeritonealDialysisRecord` (统计分析标签页)

**数据可视化**：
- 体重趋势图
- 超滤量趋势图
- 周统计数据摘要（平均超滤量、体重变化、平均血压、透析次数）

### 3.3 健康指标监测

#### 3.3.1 体重管理

**功能描述**：
- 记录和跟踪体重变化
- 分析体重与腹透的关系
- 设置体重目标

**关键页面**：
- `/statistics` (体重标签页)

**组件**：
- `WeightAnalysis` - 体重分析组件

#### 3.3.2 血压监测

**功能描述**：
- 记录和跟踪血压数据
- 分析血压与腹透的关系
- 血压异常提醒

**关键页面**：
- `/bloodPressure` - 血压记录页面
- `/statistics` (血压标签页)

**组件**：
- `BPAnalysis` - 血压分析组件

#### 3.3.3 其他健康指标

**功能描述**：
- 尿量记录和分析
- 饮水量记录和分析

**关键页面**：
- `/statistics` (尿量和喝水标签页)

## 4. UI设计规范

### 4.1 配色方案

- **主色调**：蓝色系 (#4169E1)
- **辅助色**：
  - 紫色 (#C58BF2) - 用于引流量数据
  - 粉色 (#EEA4CE) - 用于注入量数据
  - 绿色 (#50C878) - 用于超滤量数据
- **背景色**：浅灰色 (#f5f5f5)
- **文字颜色**：
  - 主要文字：深灰色 (#333)
  - 次要文字：中灰色 (#666)
  - 提示文字：浅灰色 (#999)

### 4.2 组件设计

#### 4.2.1 卡片组件

- 圆角设计 (10px)
- 轻微阴影效果
- 白色背景
- 内边距统一

#### 4.2.2 按钮设计

- 主要按钮：蓝色背景，白色文字，圆角设计
- 次要按钮：白色背景，蓝色边框和文字
- 图标按钮：使用Material Design图标系统

#### 4.2.3 表单组件

- 输入框：简洁设计，聚焦时显示边框
- 选择器：胶囊式设计，选中状态明显
- 日期选择器：日历式设计，标记有数据的日期

#### 4.2.4 图表组件

- 线图：平滑曲线，清晰的坐标轴和标签
- 柱状图：适当间距，渐变色填充
- 图例：简洁明了，与数据颜色一致

### 4.3 页面布局

- 顶部导航栏：标题居中，左侧返回按钮，右侧功能按钮
- 内容区：滚动视图，适当内边距
- 底部操作区：固定位置，突出主要操作按钮

## 5. 数据架构

### 5.1 核心数据模型

#### 5.1.1 腹透计划 (PdPlanVO)

```typescript
interface PdPlanVO {
  id: string;
  userId: string;
  name: string;
  schedules: PdSchedule[];
  createdAt: string;
  updatedAt: string;
}

interface PdSchedule {
  sequence: number;
  timeSlot: string; // 格式: "HH:MM"
  concentration: string; // 例如: "1.5%", "2.5%", "4.25%"
  volume: number; // 单位: ml
}
```

#### 5.1.2 腹透记录 (PdRecord)

```typescript
interface PdRecord {
  id: string;
  userId: string;
  recordDate: string; // 格式: "YYYY-MM-DD"
  recordTime: string; // 格式: "HH:MM:SS"
  dialysateType: string; // 例如: "1.5%", "2.5%", "4.25%"
  infusionVolume: number; // 单位: ml
  drainageVolume: number; // 单位: ml
  ultrafiltration: number; // 单位: ml
  createdAt: string;
  updatedAt: string;
}
```

### 5.2 API接口设计

#### 5.2.1 腹透计划接口

- `getCurrentPdPlan(userId)` - 获取当前腹透计划
- `createPdPlan(plan)` - 创建腹透计划
- `updatePdPlan(plan)` - 更新腹透计划
- `deletePdPlan(planId)` - 删除腹透计划

#### 5.2.2 腹透记录接口

- `addPdRecord(record)` - 添加腹透记录
- `getPdRecords(userId, startDate, endDate)` - 获取腹透记录
- `updatePdRecord(record)` - 更新腹透记录
- `deletePdRecord(recordId)` - 删除腹透记录
- `isFirstTimeUser(userId)` - 检查是否首次使用

## 6. 功能优化建议

### 6.1 腹透记录页面优化

1. **数据同步**
   - 将腹透记录页面的统计分析与统计中心的腹透分析数据同步
   - 避免功能重复和数据不一致

2. **用户体验改进**
   - 添加引导教程，帮助新用户快速上手
   - 优化数据输入流程，减少操作步骤

3. **功能整合**
   - 将腹透记录页面与腹透计划记录页面功能整合
   - 统一数据录入界面和交互方式

### 6.2 统计分析功能增强

1. **数据导出**
   - 添加数据导出功能，支持PDF、Excel等格式
   - 方便患者与医生分享数据

2. **智能提醒**
   - 基于历史数据分析，提供智能提醒和建议
   - 异常数据预警和处理建议

3. **医患互动**
   - 添加医患互动功能，支持远程数据共享
   - 医生可查看患者数据并提供建议

## 7. 技术架构

### 7.1 前端技术栈

- React Native / Taro - 跨平台开发框架
- React - 用户界面库
- Taro UI - UI组件库
- Chart.js / Echarts - 数据可视化库

### 7.2 后端技术栈

- Node.js / Java - 服务器端语言
- Express / Spring Boot - Web框架
- MongoDB / MySQL - 数据库
- Redis - 缓存

### 7.3 部署架构

- 前端：App Store / Google Play / 微信小程序
- 后端：云服务器
- 数据存储：云数据库
- 文件存储：对象存储服务

## 8. 总结

"腹透日记"APP通过全面的腹透数据管理和分析功能，为腹膜透析患者提供了便捷的健康管理工具。应用整合了腹透记录、数据分析、健康指标监测等功能，帮助患者更好地管理自己的治疗过程，提高生活质量。

未来的发展方向将聚焦于数据分析能力的增强、用户体验的优化以及医患互动功能的拓展，为患者提供更加智能化、个性化的健康管理服务。 